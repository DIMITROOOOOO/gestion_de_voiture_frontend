<div class="container mt-5">
  <h1 class="text-center mb-4">Consommation du Véhicule</h1>

  <!-- Section de recherche -->
  <div class="search-section mb-4">
    <div class="input-group">
      <input
        type="text"
        class="form-control"
        [(ngModel)]="plaqueImmatriculation"
        placeholder="Entrez la plaque d'immatriculation"
      />
      <button class="btn btn-primary" (click)="handleSearch()">Rechercher</button>
      <button class="btn btn-success" (click)="openAddModal(addModal)">Ajouter des informations</button>
    </div>
  </div>

  <!-- Affichage des données de consommation -->
  <div *ngIf="consommationData.length > 0" class="data-section">
    <h2 class="text-center mb-3">Historique de Consommation</h2>
    <table class="table table-striped table-bordered">
      <thead class="thead-dark">
        <tr>
          <th>Date</th>
          <th>Quantité Consommée</th>
          <th>Montant Dépensé</th>
        </tr>
      </thead>
      <tbody>
        <tr *ngFor="let record of consommationData">
          <td>{{ record.dateConsommation }}</td>
          <td>{{ record.quantiteConsommee }}</td>
          <td>{{ record.montantDepense }}</td>
        </tr>
      </tbody>
    </table>
  </div>

  <!-- Modal pour ajouter une consommation -->
  <ng-template #addModal let-modal>
    <div class="modal-header">
      <h4 class="modal-title">Ajouter un Nouvel Enregistrement de Consommation</h4>
      <button type="button" class="close" aria-label="Fermer" (click)="modal.dismiss()">
        <span aria-hidden="true">&times;</span>
      </button>
    </div>
    <div class="modal-body">
      <form (ngSubmit)="handleAddConsommation()">
        <div class="form-group">
          <label for="dateConsommation">Date :</label>
          <input
            type="date"
            id="dateConsommation"
            [(ngModel)]="newConsommation.dateConsommation"
            name="dateConsommation"
            class="form-control"
            required
          />
        </div>
        <div class="form-group">
          <label for="quantiteConsommee">Quantité Consommée :</label>
          <input
            type="number"
            id="quantiteConsommee"
            [(ngModel)]="newConsommation.quantiteConsommee"
            name="quantiteConsommee"
            class="form-control"
            required
          />
        </div>
        <div class="form-group">
          <label for="montantDepense">Montant Dépensé :</label>
          <input
            type="number"
            id="montantDepense"
            [(ngModel)]="newConsommation.montantDepense"
            name="montantDepense"
            class="form-control"
            required
          />
        </div>
        <div class="text-right">
          <button type="submit" class="btn btn-primary">Ajouter</button>
          <button type="button" class="btn btn-secondary ml-2" (click)="modal.dismiss()">Annuler</button>
        </div>
      </form>
    </div>
  </ng-template>
</div>